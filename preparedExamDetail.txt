let preparedExamDetail = {
    sync_client_locid: parseInt(Sync_Client_LocId),
    patientId: params.PatientId, 
    orderId: params.OrderId, 
    examId: params.ExamId, 
    providerId: examDetails.ProviderId, 
    diabetes: examDetails.Diabetes || false, 
    isInvoiced: examDetails.IsInvoiced || false,  
    hasEditPermission: examDetails.HasEditExamPermission || false,  
    telehealthFeatureAvailable: examDetails.telehealthFeatureAvailable || false, 
    performOnTheFlyCalculations: examDetails.performOnTheFlyCalculationsForExamOrders || false, 
    isLifeStyleQuestionEnabled: examDetails.isLifeStyleQuestionEnabled || false, 
    isPriceTransparencyEnabled: examDetails.isPriceTransparencyEnabled || false, 
  
    providers: examDetails.Providers?.map(proItems => ({
      description: proItems.Description,
      key: proItems.Key,
      keyValue: proItems.KeyValue
    })) || [], 
    
    examCptCodes: examDetails.ExamCptCodes?.map(eccItems => ({
      description: eccItems.Description,
      key: eccItems.Key,
      keyValue: eccItems.KeyValue
    })) || [],
    
    fittingFeeCptCodes: examDetails.FittingFeeCptCodes?.map(ffccItems => ({
      description: ffccItems.Description,
      key: ffccItems.Key,
      keyValue: ffccItems.KeyValue
    })) || [],
    
    procedureCptCodes: examDetails.ProcedureCptCodes?.map(pccItems => ({
      description: pccItems.Description,
      key: pccItems.Key,
      keyValue: pccItems.KeyValue
    })) || [],
    
    pqrsCptCodes: examDetails.PqrsCptCodes?.map(pccItems => ({
      description: pccItems.Description,
      key: pccItems.Key,
      keyValue: pccItems.KeyValue
    })) || [],
    
    modifierCodes: examDetails.ModifierCodes?.map(mcsItems => ({
      description: mcsItems.Description,
      key: mcsItems.Key,
      keyValue: mcsItems.KeyValue,
      keyStr: mcsItems.KeyStr
    })) || [],

    diagnosticCodes: examDetails.DiagnosisCodes?.map(dcItems => ({
      description: dcItems.Description,
      key: dcItems.Key,
      keyValue: dcItems.KeyValue
    })) || [],

    // pqrsModifierCodes: examDetails.PqrsModifierCodes?.map(pmcItems => ({
    //   description: pmcItems.Description,
    //   keyValue: pmcItems.KeyValue
    //   keyStr: pmcItems.KeyStr,
    // })) || [],
    // todo: ask about this
  
    dilationReasons: examDetails.DilationReasons || null, 
    insuranceEligibilityId: examDetails.InsuranceEligibilityId || null, 
    
    diagnosticCodeA: examDetails.DiagnosticCodeA || null,
    diagnosticCodeB: examDetails.DiagnosticCodeB || null,
    diagnosticCodeC: examDetails.DiagnosticCodeC || null,
    diagnosticCodeD: examDetails.DiagnosticCodeD || null,
    diagnosticCodeE: examDetails.DiagnosticCodeE || null,
    diagnosticCodeF: examDetails.DiagnosticCodeF || null,
    diagnosticCodeG: examDetails.DiagnosticCodeG || null,
    diagnosticCodeH: examDetails.DiagnosticCodeH || null,
    diagnosticCodeI: examDetails.DiagnosticCodeI || null,
    diagnosticCodeJ: examDetails.DiagnosticCodeJ || null,
    diagnosticCodeK: examDetails.DiagnosticCodeK || null,
    diagnosticCodeL: examDetails.DiagnosticCodeL || null, 
    
    multipleExamCptWarning: examDetails.MultipleExamCptWarning,

    selectedExamCptCode: {
      patientExamProcedureId: examDetails.SelectedExamCptCode?.PatientExamProcedureId || null,
      available: examDetails.SelectedExamCptCode?.Available || false,
      procedureCode: examDetails.SelectedExamCptCode?.ProcedureCode || null,
      procedureName: examDetails.SelectedExamCptCode?.ProcedureName || null,
      isFittingFee: examDetails.SelectedExamCptCode?.IsFittingFee || false,
      isExam: examDetails.SelectedExamCptCode?.IsExam || false,
      diagCode1: examDetails.SelectedExamCptCode?.DiagCode1 || null, 
      diagCode2: examDetails.SelectedExamCptCode?.DiagCode2 || null, 
      diagCode3: examDetails.SelectedExamCptCode?.DiagCode3 || null, 
      diagCode4: examDetails.SelectedExamCptCode?.DiagCode4 || null, 
      diagCode5: examDetails.SelectedExamCptCode?.DiagCode5 || null, 
      diagCode6: examDetails.SelectedExamCptCode?.DiagCode6 || null, 
      diagCode7: examDetails.SelectedExamCptCode?.DiagCode7 || null, 
      diagCode8: examDetails.SelectedExamCptCode?.DiagCode8 || null, 
      diagCode9: examDetails.SelectedExamCptCode?.DiagCode9 || null, 
      diagCode10: examDetails.SelectedExamCptCode?.DiagCode10 || null, 
      diagCode11: examDetails.SelectedExamCptCode?.DiagCode11 || null, 
      diagCode12: examDetails.SelectedExamCptCode?.DiagCode12 || null,               
      itemId: examDetails.SelectedExamCptCode?.ItemId || null,
      price: examDetails.SelectedExamCptCode?.Price ?? null,
      allowZeroPrice: examDetails.SelectedExamCptCode?.AllowZeroPrice || false,
      priceDisplay: examDetails.SelectedExamCptCode?.PriceDisplay || false,
      selectedDiagnosticCodeIds: examDetails.SelectedExamCptCode?.SelectedDiagnosticCodeIds || [],
      selectedDiagnosticCodesDisplay: examDetails.SelectedExamCptCode?.SelectedDiagnosticCodesDisplay || false,
      pqrsCode: examDetails.SelectedExamCptCode?.PqrsCode || false,
      pqrsDescription: examDetails.SelectedExamCptCode?.PqrsDescription || false,
      modifier1: examDetails.SelectedExamCptCode?.Modifier1 || false,
      modifier2: examDetails.SelectedExamCptCode?.Modifier2 || false,
      modifier3: examDetails.SelectedExamCptCode?.Modifier3 || false,
      modifier4: examDetails.SelectedExamCptCode?.Modifier4 || false,
      selectedModifierCodes: examDetails.SelectedExamCptCode?.SelectedModifierCodes || [],
      selectedModifierCodesDisplay: examDetails.SelectedExamCptCode?.SelectedModifierCodesDisplay || null,
    },
    
    selectedFittingFeeCptCode: {
      patientExamProcedureId: examDetails.SelectedFittingFeeCptCode?.PatientExamProcedureId || null,
      available: examDetails.SelectedFittingFeeCptCode?.Available || false,
      procedureCode: examDetails.SelectedFittingFeeCptCode?.ProcedureCode || null,
      procedureName: examDetails.SelectedFittingFeeCptCode?.ProcedureName || null,
      isFittingFee: examDetails.SelectedFittingFeeCptCode?.IsFittingFee || false,
      isExam: examDetails.SelectedFittingFeeCptCode?.IsExam || false,
      diagCode1: examDetails.SelectedFittingFeeCptCode?.DiagCode1 || null, 
      diagCode2: examDetails.SelectedFittingFeeCptCode?.DiagCode2 || null, 
      diagCode3: examDetails.SelectedFittingFeeCptCode?.DiagCode3 || null, 
      diagCode4: examDetails.SelectedFittingFeeCptCode?.DiagCode4 || null, 
      diagCode5: examDetails.SelectedFittingFeeCptCode?.DiagCode5 || null, 
      diagCode6: examDetails.SelectedFittingFeeCptCode?.DiagCode6 || null, 
      diagCode7: examDetails.SelectedFittingFeeCptCode?.DiagCode7 || null, 
      diagCode8: examDetails.SelectedFittingFeeCptCode?.DiagCode8 || null, 
      diagCode9: examDetails.SelectedFittingFeeCptCode?.DiagCode9 || null, 
      diagCode10: examDetails.SelectedFittingFeeCptCode?.DiagCode10 || null, 
      diagCode11: examDetails.SelectedFittingFeeCptCode?.DiagCode11 || null, 
      diagCode12: examDetails.SelectedFittingFeeCptCode?.DiagCode12 || null,               
      itemId: examDetails.SelectedFittingFeeCptCode?.ItemId || null,
      price: examDetails.SelectedFittingFeeCptCode?.Price ?? null,
      allowZeroPrice: examDetails.SelectedFittingFeeCptCode?.AllowZeroPrice || false,
      priceDisplay: examDetails.SelectedFittingFeeCptCode?.PriceDisplay || false,
      selectedDiagnosticCodeIds: examDetails.SelectedFittingFeeCptCode?.SelectedDiagnosticCodeIds || [],
      selectedDiagnosticCodesDisplay: examDetails.SelectedFittingFeeCptCode?.SelectedDiagnosticCodesDisplay || false,
      pqrsCode: examDetails.SelectedFittingFeeCptCode?.PqrsCode || false,
      pqrsDescription: examDetails.SelectedFittingFeeCptCode?.PqrsDescription || false,
      modifier1: examDetails.SelectedFittingFeeCptCode?.Modifier1 || false,
      modifier2: examDetails.SelectedFittingFeeCptCode?.Modifier2 || false,
      modifier3: examDetails.SelectedFittingFeeCptCode?.Modifier3 || false,
      modifier4: examDetails.SelectedFittingFeeCptCode?.Modifier4 || false,
      selectedModifierCodes: examDetails.SelectedFittingFeeCptCode?.SelectedModifierCodes || [],
      selectedModifierCodesDisplay: examDetails.SelectedFittingFeeCptCode?.SelectedModifierCodesDisplay || null,
    }, 

    selectedProcedureCptCodes: examDetails.SelectedProcedureCptCodes || [], 
    selectedPqrsCptCodes: examDetails.SelectedPqrsCptCodes || null,
    
    dilation: examDetails.Dilation || null, 
    armd: examDetails.Armd || false, 
    diabeticRetinopathy: examDetails.DiabeticRetinopathy || false, 
    highRiskPreDiabetes: examDetails.HighRiskPreDiabetes || false, 
    glaucoma: examDetails.Glaucoma || false, 
    highCholesterol: examDetails.HighCholesterol || false, 
    hypertension: examDetails.Hypertension || false, 
    arcus: examDetails.Arcus || false, 
    abnormalPupil: examDetails.AbnormalPupil || false, 
    cataract: examDetails.Cataract || false, 
    pcp: examDetails.Pcp || false, 
    
    employeeId: examDetails.EmployeeId || null,
    isEstimated: examDetails.InsurancePricing.IsEstimated || false, 
    primaryInsurance: examDetails.InsurancePricing.PrimaryInsurance || null, 
    secondaryInsurance: examDetails.InsurancePricing.SecondaryInsurance || null, 

    itemCharges: examDetails.InsurancePricing?.ItemCharges?.map(item => ({
      itemId: item.ItemId,
      itemTypeId: item.ItemTypeId,
      itemTypeDescription: item.ItemTypeDescription,
      itemName: item.itemName,
      retailPrice: item.RetailPrice,
      quantity: item.Quantity,
      patientCopayPrimary: item.PatientCopayPrimary,
      insuranceAllowancePrimary: item.InsuranceAllowancePrimary,
      insuranceReceivablePrimary: item.InsuranceReceivablePrimary,
      insuranceDiscountPrimary: item.InsuranceDiscountPrimary,
      patientCopaySecondary: item.PatientCopaySecondary,
      insuranceAllowanceSecondary: item.InsuranceAllowanceSecondary,
      insuranceReceivableSecondary: item.InsuranceReceivableSecondary,
      insuranceDiscountSecondary: item.InsuranceDiscountSecondary,
      eligibilityIdPrimary: item.EligibilityIdPrimary,
      eligibilityIdSecondary: item.EligibilityIdSecondary,
      tax: item.Tax,
      patientResponsibility: item.PatientResponsibility,
      isExam: item.IsExam,
      isContactLens: item.IsContactLens,
      isCoating: item.IsCoating,
      isFittingFee: item.IsFittingFee,
      isProcedure: item.IsProcedure,
      isFrame: item.IsFrame,
      isLens: item.IsLens,
      isLensExtra: item.IsLensExtra,
      isMisc: item.IsMisc,
      isCopayLine: item.IsCopayLine,
      isGroupHeaderLine: item.IsGroupHeaderLine,
      isTotalLine: item.IsTotalLine,
      isForRightEye: item.IsForRightEye,
      isForLeftEye: item.IsForLeftEye,
      patientMemberOutOfPocketPrimary: item.PatientMemberOutOfPocketPrimary,
      patientMemberOutOfPocketSecondary: item.PatientMemberOutOfPocketSecondary                   
    })) || [],
  };